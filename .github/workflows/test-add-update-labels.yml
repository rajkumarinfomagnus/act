name: test-add-update-labels
on:
  workflow_dispatch:
    inputs:
      ORG_NAME:
        description: 'Organization name'
        required: true  
      REPO_NAME:
        description: 'Repository name'
        required: true   
      LABEL_NAME:
        description: 'Label name'
        required: true
      LABEL_COLOR:
        description: 'Label color'
        default: 'd7d3f4'
      LABEL_DESCRIPTION:
        description: 'Label description'
        default: 'This label is generated by github actions'
jobs:
  add-update-labels:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v3
      
      - name: Install gh CLI
        run: |
          sudo apt-get update
          sudo apt-get install gh 

      - name: Login to GitHub
        run: |
          gh auth login --with-token <<< "${{ secrets.ISSUE_OPS_TOKEN }}"  

      - name: Add/Update label
        uses: ./provisioner/actions/add-update-labels
        with:
          USER_PAT: ${{ secrets.ISSUE_OPS_TOKEN }}
          ORG_NAME: ${{ github.event.inputs.ORG_NAME }}
          REPO_NAME: ${{ github.event.inputs.REPO_NAME }}
          LABEL_NAME: ${{ github.event.inputs.LABEL_NAME }}
